{"remainingRequest":"/Users/arqnet/Desktop/tro-emsig/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/arqnet/Desktop/tro-emsig/src/views/Basic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/arqnet/Desktop/tro-emsig/src/views/Basic.vue","mtime":1566455821000},{"path":"/Users/arqnet/Desktop/tro-emsig/node_modules/cache-loader/dist/cjs.js","mtime":1615148347494},{"path":"/Users/arqnet/Desktop/tro-emsig/node_modules/babel-loader/lib/index.js","mtime":1615147414521},{"path":"/Users/arqnet/Desktop/tro-emsig/node_modules/cache-loader/dist/cjs.js","mtime":1615148347494},{"path":"/Users/arqnet/Desktop/tro-emsig/node_modules/vue-loader/lib/index.js","mtime":1615147418198}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgZ3VpZCB9IGZyb20gJy4uL3V0aWwvaGVscGVycycKaW1wb3J0IEZpZWxkSXRlbSBmcm9tICcuL0ZpZWxkSXRlbScKaW1wb3J0IFVwbG9hZCBmcm9tICdAL2NvbXBvbmVudHMvVXBsb2FkJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdCYXNpYycsCgogIGNvbXBvbmVudHM6IHsKICAgIEZpZWxkSXRlbSwKICAgIFVwbG9hZAogIH0sCgogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZmllbGROYW1lOiAnJywKICAgICAgZmlsZWRWYWx1ZTogJycsCiAgICAgIGZpbGVkVHlwZTogJ3RleHQnLAogICAgICBpbWFnZUxpbms6ICcnLAogICAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgICAgc2hvd0FsZXJ0OiBmYWxzZQogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ2F0dHJpYnV0ZXMnLCAnYmFzaWMnXSksCiAgICBpbWFnZVVybDogewogICAgICBnZXQgKCkgewogICAgICAgIHJldHVybiB0aGlzLmJhc2ljLmltYWdlLmxpbmsKICAgICAgfSwKICAgICAgc2V0ICh2KSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUltYWdlJywgeyBsaW5rOiB2IH0pCiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuJGdhLnBhZ2UodGhpcy4kcm91dGVyKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFkZEZpZWxkICgpIHsKICAgICAgY29uc3QgbmV3RmlsZWQgPSB7CiAgICAgICAgbmFtZTogdGhpcy5maWVsZE5hbWUsCiAgICAgICAgdmFsdWU6IHRoaXMuZmlsZWRWYWx1ZSwKICAgICAgICB0eXBlOiB0aGlzLmZpbGVkVHlwZSwKICAgICAgICBpZDogZ3VpZCgpCiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhZGRGaWVsZCcsIG5ld0ZpbGVkKQogICAgICB0aGlzLmZpZWxkTmFtZSA9ICcnCiAgICAgIHRoaXMuZmlsZWRWYWx1ZSA9ICcnCiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlCiAgICB9LAogICAgb25BZGRGaWVsZCAoKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuZmllbGROYW1lLmZvY3VzKCkKICAgICAgfSkKICAgIH0sCiAgICBvbkFkZExpbmsgKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXBkYXRlSW1hZ2UnLCB7IGxpbms6IHRoaXMuaW1hZ2VVcmwgfSkKICAgIH0sCiAgICBvbkNsZWFySW1hZ2VMaW5rICgpIHsKICAgICAgdGhpcy5pbWFnZUxpbmsgPSAnJwogICAgICB0aGlzLm9uQWRkTGluaygpCiAgICB9LAogICAgb25VcGxvYWQgKHVybCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXBkYXRlSW1hZ2UnLCB7IGxpbms6IHVybCB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Basic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Basic.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"basic\">\n    <el-form>\n      <el-form-item>\n        <div class=\"image-preview-wrapper\">\n          <div\n            class=\"image-preview\"\n            :style=\"{'background-image': `url(${imageUrl})` }\"\n          />\n          <div class=\"image-preview__actions\">\n            <upload\n              :crop-width=\"200\"\n              :crop-height=\"200\"\n              @upload=\"onUpload\"\n            />\n            <el-row :gutter=\"20\">\n              <el-col :span=\"16\">\n                <el-input\n                  v-model=\"imageUrl\"\n                  placeholder=\"http://\"\n                  clearable\n                  @clear=\"onClearImageLink\"\n                />\n              </el-col>\n              <el-col :span=\"8\">\n                <el-button @click=\"onAddLink\">Add link</el-button>\n              </el-col>\n            </el-row>\n            <div class=\"desc\">\n              <p>You can upload image or add the public link to image.</p>\n            </div>\n          </div>\n        </div>\n      </el-form-item>\n      <el-row :gutter=\"20\">\n        <el-col\n          v-for=\"(item, index) in basic.fields\"\n          :key=\"item.id\"\n          :span=\"12\"\n        >\n          <field-item\n            :is-addon-field=\"index > 5\"\n            :index=\"index\"\n          />\n        </el-col>\n      </el-row>\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          style=\"width: 100%;\"\n          @click=\"onAddField\"\n        >Add custom field</el-button>\n      </el-form-item>\n    </el-form>\n    <!-- Add new field dialog -->\n    <el-dialog\n      title=\"Add new field\"\n      :visible.sync=\"showDialog\"\n    >\n      <el-alert\n        v-if=\"showAlert\"\n        title=\"Label is exist\"\n        type=\"error\"\n        :closable=\"false\"\n      />\n      <el-form label-position=\"top\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"8\">\n            <el-form-item label=\"Label\">\n              <el-input\n                ref=\"fieldName\"\n                v-model.trim=\"fieldName\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"Value\">\n              <el-input v-model.trim=\"filedValue\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"Type\">\n              <el-select\n                v-model=\"filedType\"\n                style=\"width:100%;\"\n              >\n                <el-option\n                  v-for=\"item in attributes.types\"\n                  :key=\"item.value\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-form-item style=\"text-align: right;\">\n          <el-button\n            type=\"primary\"\n            @click=\"addField\"\n          >Add field</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { guid } from '../util/helpers'\nimport FieldItem from './FieldItem'\nimport Upload from '@/components/Upload'\n\nexport default {\n  name: 'Basic',\n\n  components: {\n    FieldItem,\n    Upload\n  },\n\n  data () {\n    return {\n      fieldName: '',\n      filedValue: '',\n      filedType: 'text',\n      imageLink: '',\n      showDialog: false,\n      showAlert: false\n    }\n  },\n\n  computed: {\n    ...mapState(['attributes', 'basic']),\n    imageUrl: {\n      get () {\n        return this.basic.image.link\n      },\n      set (v) {\n        this.$store.dispatch('updateImage', { link: v })\n      }\n    }\n  },\n\n  created () {\n    this.$ga.page(this.$router)\n  },\n\n  methods: {\n    addField () {\n      const newFiled = {\n        name: this.fieldName,\n        value: this.filedValue,\n        type: this.filedType,\n        id: guid()\n      }\n\n      this.$store.dispatch('addField', newFiled)\n      this.fieldName = ''\n      this.filedValue = ''\n      this.showDialog = false\n    },\n    onAddField () {\n      this.showDialog = true\n      this.$nextTick(() => {\n        this.$refs.fieldName.focus()\n      })\n    },\n    onAddLink () {\n      this.$store.dispatch('updateImage', { link: this.imageUrl })\n    },\n    onClearImageLink () {\n      this.imageLink = ''\n      this.onAddLink()\n    },\n    onUpload (url) {\n      this.$store.dispatch('updateImage', { link: url })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../assets/scss/variables';\n\n.image-preview-wrapper {\n  display: flex;\n  margin-top: 20px;\n  .image-preview {\n    margin-right: 30px;\n    width: 100px;\n    height: 100px;\n    background-color: #eee;\n    border-radius: 100%;\n    background-size: 100px;\n    background-position: center center;\n    background-size: cover;\n    flex-shrink: 0;\n    overflow: hidden;\n    &__actions {\n      width: 100%;\n      .upload {\n        margin-bottom: 20px;\n      }\n    }\n  }\n  .remove-image {\n    padding: 10px;\n    cursor: pointer;\n    &:hover {\n      i {\n        color: #909399;\n      }\n    }\n    i {\n      color: #c0c4cc;\n    }\n  }\n\n  .el-button {\n    height: 40px;\n  }\n  .el-upload {\n    display: inline-block;\n    margin-bottom: 20px;\n  }\n}\n.remove-field {\n  display: inline-block;\n  cursor: pointer;\n}\n.edit {\n  i {\n    color: $color-primary;\n  }\n  &:hover {\n    i {\n      color: darken($color-primary, 20%);\n    }\n  }\n}\n.delete {\n  i {\n    color: red;\n  }\n  &:hover {\n    i {\n      color: darken(red, 20%);\n    }\n  }\n}\n.image-tips {\n  border-bottom: 1px dashed;\n  .el-popover__reference {\n    cursor: pointer;\n  }\n}\n</style>\n"]}]}